{% extends 'base.html' %}

{% block title %}{{name}}{% endblock %}

{% block content %}
   
  <div class="row"> 
    {% for item in items %}
    <div class="col-md-6">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">{{ item }}</h3>
        </div>
        <div class="panel-body">
          <div id="chart_{{item|lower}}"></div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Network</h3>
        </div>
        <div class="panel-body">
          <div id="chart_net_throughtput"></div>
          <div id="chart_net_errors"></div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block js %}
    <script type="text/javascript">
        var temporal_axis =  ['x'].concat({{data.time|safe}});

        var chart_cpu = c3.generate({
                    bindto: '#chart_cpu',
                    data: {
                        x: 'x',
                        xFormat: '%Y-%m-%d %H:%M',
                        columns: [
                            temporal_axis,
                            ['cpu'].concat({{data.cpu|safe}})
                        ],
                        types: {
                            cpu: 'area-spline'
                        }
                    },
                    point: {
                        show: false
                    },
	            axis: {
	                x: {
	                    type: 'timeseries',
	                    tick: {
	                        fit: true,
	                        format: '%H:%M'
	                    }
	                },
                        y: {
                            label: {
                                text: 'CPU Usage (%)',
                                position: 'outer-center'
                            }
                        }
	            }
	    });

        // Memory
        var chart_mem = c3.generate({
                    bindto: '#chart_memory',
                    data: {
                        x: 'x',
                        xFormat: '%Y-%m-%d %H:%M',
                        columns: [
                            temporal_axis,
                            ['mem'].concat({{data.mem|safe}})
                        ],
                        types: {
                            mem: 'area-spline'
                        }
                    },
                    point: {
                        show: false
                    },
	            axis: {
	                x: {
	                    type: 'timeseries',
	                    tick: {
	                        fit: true,
	                        format: '%H:%M'
	                    }
	                },
                        y: {
                            label: {
                                text: 'Memory usage (bytes)',
                                position: 'outer-center'
                            }
                        }
	            }
	    });

        // Network
        var chart_net_throughtput = c3.generate({
                    bindto: '#chart_net_throughtput',
                    data: {
                        x: 'x',
                        xFormat: '%Y-%m-%d %H:%M',
                        columns: [
                            temporal_axis,
                            ['Rx'].concat({{data.net.rx|safe}}),
                            ['Tx'].concat({{data.net.tx|safe}})
                        ],
                        types: {
                            Rx: 'spline',
                            Tx: 'spline'
                        },
                        colors: {
                            Rx: '#ff0000'
                        }
                    },
                    point: {
                        show: false
                    },
                    axis: {
                        x: {
                            type: 'timeseries',
                            tick: {
                                fit: true,
                                format: '%H:%M'
                            }
                        },
                        y: {
                            label: {
                                text: 'Bytes per second',
                                position: 'outer-center'
                            }
                        }
                    }
        });

        var chart_net_errors = c3.generate({

        });
    </script>
{% endblock %}
